<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auto-diagnostic - CyberGuide</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #333;
        }

        .nav {
            background: #1e3a5f;
            padding: 1rem 2rem;
            position: sticky;
            top: 0;
            z-index: 100;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .nav .logo {
            height: 40px;
        }

        .nav ul {
            list-style: none;
            display: flex;
            gap: 2rem;
            flex-wrap: wrap;
        }

        .nav a {
            color: white;
            text-decoration: none;
            font-weight: 500;
        }

        .nav a:hover {
            color: #00d4d4;
        }

        .header {
            background: linear-gradient(135deg, #1e3a5f 0%, #2d4a6f 100%);
            color: white;
            padding: 3rem 2rem;
            text-align: center;
        }

        .header h1 {
            font-size: 2rem;
            margin-bottom: 0.5rem;
            color: #00d4d4;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 2rem;
        }

        .progress-bar {
            background: #e2e8f0;
            height: 8px;
            border-radius: 4px;
            margin-bottom: 2rem;
        }

        .progress-fill {
            background: #00d4d4;
            height: 100%;
            border-radius: 4px;
            transition: width 0.3s;
        }

        .question-container {
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 2rem;
            margin-bottom: 1.5rem;
        }

        .question-number {
            color: #718096;
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }

        .question-text {
            font-size: 1.2rem;
            font-weight: 600;
            color: #1e3a5f;
            margin-bottom: 1.5rem;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .option {
            padding: 1rem;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .option:hover {
            border-color: #00d4d4;
            background: #f0fdfd;
        }

        .option.selected {
            border-color: #00b4b4;
            background: #e0f7f7;
        }

        .btn {
            display: inline-block;
            background: #00b4b4;
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 5px;
            text-decoration: none;
            font-weight: 500;
            border: none;
            cursor: pointer;
            font-size: 1rem;
        }

        .btn:hover {
            background: #0891b2;
        }

        .btn:disabled {
            background: #a0aec0;
            cursor: not-allowed;
        }

        .btn-secondary {
            background: #718096;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 1.5rem;
        }

        .results {
            display: none;
        }

        .results.show {
            display: block;
        }

        .score-card {
            background: linear-gradient(135deg, #1e3a5f 0%, #2d4a6f 100%);
            color: white;
            padding: 2rem;
            border-radius: 8px;
            text-align: center;
            margin-bottom: 2rem;
        }

        .score-number {
            color: #00d4d4;
        }

        .result-image {
            max-width: 200px;
            border-radius: 8px;
            margin-bottom: 1rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            display: none;
        }

        .score-number {
            font-size: 4rem;
            font-weight: bold;
        }

        .score-label {
            font-size: 1.2rem;
            margin-top: 0.5rem;
        }

        .level-badge {
            display: inline-block;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-weight: 600;
            margin-top: 1rem;
        }

        .level-debutant {
            background: #fed7d7;
            color: #c53030;
        }

        .level-intermediaire {
            background: #feebc8;
            color: #c05621;
        }

        .level-avance {
            background: #e0f7f7;
            color: #0891b2;
        }

        .recommendations {
            background: #f7fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .recommendations h3 {
            color: #0891b2;
            margin-bottom: 1rem;
        }

        .reco-item {
            display: flex;
            gap: 1rem;
            padding: 1rem;
            background: white;
            border-radius: 5px;
            margin-bottom: 0.75rem;
            border-left: 4px solid #00d4d4;
        }

        .reco-priority {
            font-weight: bold;
            color: #c53030;
            min-width: 30px;
        }

        .reco-priority.medium {
            color: #c05621;
        }

        .reco-priority.low {
            color: #276749;
        }

        .trajectory {
            background: #f0fdfd;
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 1.5rem;
            border-left: 4px solid #00d4d4;
        }

        .trajectory h3 {
            color: #0891b2;
            margin-bottom: 1rem;
        }

        .trajectory-step {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .step-number {
            width: 30px;
            height: 30px;
            background: #00b4b4;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            flex-shrink: 0;
        }

        .links-section {
            margin-top: 2rem;
        }

        .links-section h3 {
            color: #0891b2;
            margin-bottom: 1rem;
        }

        .link-card {
            display: block;
            padding: 1rem;
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 5px;
            margin-bottom: 0.75rem;
            text-decoration: none;
            color: #333;
            transition: all 0.2s;
        }

        .link-card:hover {
            border-color: #00d4d4;
            background: #f0fdfd;
        }

        .link-card strong {
            color: #0891b2;
        }

        footer {
            background: #1e3a5f;
            color: white;
            text-align: center;
            padding: 2rem;
            margin-top: 3rem;
        }

        .hidden {
            display: none;
        }
    </style>
</head>

<body>
    <nav class="nav">
        <a href="index.html"><img src="cyber.png" alt="CyberGuide" class="logo"></a>
        <ul>
            <li><a href="index.html">Accueil</a></li>
            <li><a href="secteurs.html">Secteurs</a></li>
            <li><a href="sensibilisation.html">Sensibilisation</a></li>
            <li><a href="reglementation.html">Réglementation</a></li>
            <li><a href="acteurs.html">Acteurs & Outils</a></li>
            <li><a href="quiz.html">Auto-diagnostic</a></li>
        </ul>
    </nav>

    <header class="header">
        <h1>Auto-diagnostic Cybersécurité</h1>
        <p>Évaluez votre maturité et obtenez une trajectoire personnalisée</p>
    </header>

    <main class="container">
        <div id="quiz-section">
            <div class="progress-bar">
                <div class="progress-fill" id="progress" style="width: 0%"></div>
            </div>

            <div id="questions-container"></div>

            <div class="navigation">
                <button class="btn btn-secondary" id="prevBtn" onclick="previousQuestion()" disabled>Précédent</button>
                <button class="btn" id="nextBtn" onclick="nextQuestion()">Suivant</button>
            </div>
        </div>

        <div id="results-section" class="results">
            <div class="score-card">
                <img id="result-image" class="result-image" src="" alt="Résultat">
                <div class="score-number" id="score">0</div>
                <div class="score-label">points sur 100</div>
                <div class="level-badge" id="level-badge">Niveau</div>
            </div>

            <div class="recommendations">
                <h3>Actions prioritaires pour votre organisation</h3>
                <div id="recommendations-list"></div>
            </div>

            <div class="trajectory">
                <h3>Votre trajectoire de sécurisation</h3>
                <div id="trajectory-steps"></div>
            </div>

            <div class="links-section">
                <h3>Ressources recommandées</h3>
                <a href="sensibilisation.html" class="link-card">
                    <strong>Espace Sensibilisation</strong>
                    <p>Formez vos équipes aux bonnes pratiques</p>
                </a>
                <a href="reglementation.html" class="link-card">
                    <strong>Orientation Réglementaire</strong>
                    <p>Identifiez vos obligations légales</p>
                </a>
                <a href="acteurs.html" class="link-card">
                    <strong>Acteurs & Outils</strong>
                    <p>Trouvez les bons interlocuteurs et solutions</p>
                </a>
            </div>

            <div style="text-align: center; margin-top: 2rem;">
                <button class="btn" onclick="restartQuiz()">Recommencer le diagnostic</button>
            </div>
        </div>
    </main>

    <footer>
        <p>CyberGuide - Plateforme d'orientation cybersécurité pour entreprises</p>
        <p style="margin-top: 0.5rem; font-size: 0.9rem;">Sources : ANSSI, Cybermalveillance.gouv.fr, CNIL</p>
    </footer>

    <script>
        const questions = [
            {
                question: "Avez-vous un inventaire à jour de tous vos équipements informatiques (postes, serveurs, équipements réseau) ?",
                options: [
                    { text: "Oui, inventaire complet et maintenu", points: 10 },
                    { text: "Partiellement, mais pas à jour", points: 5 },
                    { text: "Non, pas d'inventaire formalisé", points: 0 }
                ],
                category: "gouvernance"
            },
            {
                question: "Vos collaborateurs utilisent-ils l'authentification multi-facteurs (MFA) pour accéder aux ressources sensibles ?",
                options: [
                    { text: "Oui, sur tous les accès critiques", points: 10 },
                    { text: "Partiellement (email seulement)", points: 5 },
                    { text: "Non, uniquement des mots de passe", points: 0 }
                ],
                category: "acces"
            },
            {
                question: "À quelle fréquence réalisez-vous des sauvegardes de vos données critiques ?",
                options: [
                    { text: "Quotidiennement avec test de restauration", points: 10 },
                    { text: "Hebdomadairement sans test régulier", points: 5 },
                    { text: "Rarement ou jamais", points: 0 }
                ],
                category: "resilience"
            },
            {
                question: "Vos systèmes et logiciels sont-ils mis à jour régulièrement ?",
                options: [
                    { text: "Oui, processus de patch automatisé", points: 10 },
                    { text: "Manuellement quand on y pense", points: 5 },
                    { text: "Rarement, systèmes souvent obsolètes", points: 0 }
                ],
                category: "technique"
            },
            {
                question: "Vos employés ont-ils reçu une formation en cybersécurité dans les 12 derniers mois ?",
                options: [
                    { text: "Oui, formation régulière et simulations", points: 10 },
                    { text: "Une fois à l'embauche seulement", points: 5 },
                    { text: "Non, aucune formation", points: 0 }
                ],
                category: "sensibilisation"
            },
            {
                question: "Avez-vous une politique de mots de passe documentée et appliquée ?",
                options: [
                    { text: "Oui, avec complexité et gestionnaire de mots de passe", points: 10 },
                    { text: "Règles basiques (longueur minimale)", points: 5 },
                    { text: "Non, chacun choisit son mot de passe", points: 0 }
                ],
                category: "acces"
            },
            {
                question: "Disposez-vous d'une solution antivirus/EDR sur tous les postes ?",
                options: [
                    { text: "Oui, EDR avec supervision centralisée", points: 10 },
                    { text: "Antivirus basique sans gestion centrale", points: 5 },
                    { text: "Non ou solution gratuite non gérée", points: 0 }
                ],
                category: "technique"
            },
            {
                question: "Avez-vous identifié un responsable de la sécurité (RSSI ou référent) ?",
                options: [
                    { text: "Oui, avec mission et budget définis", points: 10 },
                    { text: "Informellement, quelqu'un de l'IT", points: 5 },
                    { text: "Non, pas de responsable identifié", points: 0 }
                ],
                category: "gouvernance"
            },
            {
                question: "Avez-vous un plan de réponse aux incidents documenté ?",
                options: [
                    { text: "Oui, testé par des exercices", points: 10 },
                    { text: "Oui mais jamais testé", points: 5 },
                    { text: "Non, on improvisera", points: 0 }
                ],
                category: "resilience"
            },
            {
                question: "Vos données personnelles sont-elles traitées conformément au RGPD ?",
                options: [
                    { text: "Oui, registre et DPO en place", points: 10 },
                    { text: "Partiellement, en cours de mise en conformité", points: 5 },
                    { text: "Non ou je ne sais pas", points: 0 }
                ],
                category: "conformite"
            }
        ];

        let currentQuestion = 0;
        let answers = [];

        function renderQuestion() {
            const container = document.getElementById('questions-container');
            const q = questions[currentQuestion];

            container.innerHTML = `
                <div class="question-container">
                    <div class="question-number">Question ${currentQuestion + 1} sur ${questions.length}</div>
                    <div class="question-text">${q.question}</div>
                    <div class="options">
                        ${q.options.map((opt, idx) => `
                            <div class="option ${answers[currentQuestion] === idx ? 'selected' : ''}" onclick="selectOption(${idx})">
                                ${opt.text}
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;

            document.getElementById('progress').style.width = `${((currentQuestion + 1) / questions.length) * 100}%`;
            document.getElementById('prevBtn').disabled = currentQuestion === 0;
            document.getElementById('nextBtn').textContent = currentQuestion === questions.length - 1 ? 'Voir les résultats' : 'Suivant';
        }

        function selectOption(idx) {
            answers[currentQuestion] = idx;
            document.querySelectorAll('.option').forEach((opt, i) => {
                opt.classList.toggle('selected', i === idx);
            });
        }

        function nextQuestion() {
            if (answers[currentQuestion] === undefined) {
                alert('Veuillez sélectionner une réponse.');
                return;
            }
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                renderQuestion();
            } else {
                showResults();
            }
        }

        function previousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                renderQuestion();
            }
        }

        function showResults() {
            let totalScore = 0;
            let categoryScores = {};

            questions.forEach((q, idx) => {
                const points = q.options[answers[idx]].points;
                totalScore += points;
                if (!categoryScores[q.category]) categoryScores[q.category] = { score: 0, max: 0 };
                categoryScores[q.category].score += points;
                categoryScores[q.category].max += 10;
            });

            document.getElementById('quiz-section').classList.add('hidden');
            document.getElementById('results-section').classList.add('show');
            document.getElementById('score').textContent = totalScore;

            const levelBadge = document.getElementById('level-badge');
            const resultImage = document.getElementById('result-image');
            let level, levelClass, imageSrc;
            if (totalScore >= 70) {
                level = 'Niveau Avancé';
                levelClass = 'level-avance';
                imageSrc = 'bravissimo-724306c678.jpg';
            } else if (totalScore >= 40) {
                level = 'Niveau Intermédiaire';
                levelClass = 'level-intermediaire';
                imageSrc = 'be-careful-c686ad1f3f.jpg';
            } else {
                level = 'Niveau Débutant';
                levelClass = 'level-debutant';
                imageSrc = 'ouch-d9c636c614.jpg';
            }
            levelBadge.textContent = level;
            levelBadge.className = 'level-badge ' + levelClass;
            resultImage.src = imageSrc;
            resultImage.alt = level;
            resultImage.style.display = 'inline-block';

            // Générer les recommandations
            const recoList = document.getElementById('recommendations-list');
            let recommendations = [];

            if (categoryScores.acces && categoryScores.acces.score < categoryScores.acces.max * 0.7) {
                recommendations.push({ priority: 'P1', text: 'Déployer l\'authentification multi-facteurs (MFA) sur tous les accès critiques' });
            }
            if (categoryScores.resilience && categoryScores.resilience.score < categoryScores.resilience.max * 0.7) {
                recommendations.push({ priority: 'P1', text: 'Mettre en place des sauvegardes régulières avec tests de restauration' });
            }
            if (categoryScores.technique && categoryScores.technique.score < categoryScores.technique.max * 0.7) {
                recommendations.push({ priority: 'P2', text: 'Automatiser les mises à jour de sécurité et déployer un EDR', pclass: 'medium' });
            }
            if (categoryScores.sensibilisation && categoryScores.sensibilisation.score < categoryScores.sensibilisation.max * 0.7) {
                recommendations.push({ priority: 'P2', text: 'Former les collaborateurs aux risques cyber et simuler des attaques phishing', pclass: 'medium' });
            }
            if (categoryScores.gouvernance && categoryScores.gouvernance.score < categoryScores.gouvernance.max * 0.7) {
                recommendations.push({ priority: 'P3', text: 'Désigner un responsable sécurité et formaliser un inventaire des actifs', pclass: 'low' });
            }
            if (categoryScores.conformite && categoryScores.conformite.score < categoryScores.conformite.max * 0.7) {
                recommendations.push({ priority: 'P3', text: 'Réaliser un diagnostic RGPD et mettre en place un registre des traitements', pclass: 'low' });
            }

            if (recommendations.length === 0) {
                recommendations.push({ priority: '✓', text: 'Continuez sur cette lancée ! Pensez à réaliser un audit externe pour valider votre niveau.', pclass: 'low' });
            }

            recoList.innerHTML = recommendations.map(r => `
                <div class="reco-item">
                    <span class="reco-priority ${r.pclass || ''}">${r.priority}</span>
                    <span>${r.text}</span>
                </div>
            `).join('');

            // Générer la trajectoire
            const trajectorySteps = document.getElementById('trajectory-steps');
            let steps = [];

            if (totalScore < 40) {
                steps = [
                    'Réaliser un inventaire complet de vos actifs informatiques',
                    'Déployer MFA et une politique de mots de passe robuste',
                    'Mettre en place des sauvegardes 3-2-1 (3 copies, 2 supports, 1 hors site)',
                    'Former tous les collaborateurs aux bases de la cybersécurité',
                    'Consulter le guide d\'hygiène ANSSI et appliquer les 42 mesures'
                ];
            } else if (totalScore < 70) {
                steps = [
                    'Combler les lacunes identifiées dans les recommandations ci-dessus',
                    'Formaliser une politique de sécurité (PSSI)',
                    'Mettre en place un plan de réponse aux incidents et le tester',
                    'Envisager un audit de sécurité externe (pentest)',
                    'Évaluer la pertinence d\'une certification ISO 27001'
                ];
            } else {
                steps = [
                    'Maintenir et améliorer continuellement votre niveau',
                    'Réaliser des exercices de crise cyber réguliers',
                    'Intégrer la sécurité dans vos processus métier (DevSecOps)',
                    'Partager vos bonnes pratiques au sein de votre écosystème',
                    'Envisager une certification ISO 27001 si ce n\'est pas fait'
                ];
            }

            trajectorySteps.innerHTML = steps.map((step, idx) => `
                <div class="trajectory-step">
                    <div class="step-number">${idx + 1}</div>
                    <div>${step}</div>
                </div>
            `).join('');
        }

        function restartQuiz() {
            currentQuestion = 0;
            answers = [];
            document.getElementById('quiz-section').classList.remove('hidden');
            document.getElementById('results-section').classList.remove('show');
            renderQuestion();
        }

        // Initialisation
        renderQuestion();
    </script>
</body>

</html>